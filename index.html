<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Add Inset Panels to Maps • ggmapinset</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Add Inset Panels to Maps">
<meta name="description" content="Helper to add insets based on geom_sf() from ggplot2. This package gives you a drop-in replacement for geom_sf() that supports adding a zoomed inset map without having to create and embed a separate plot.">
<meta property="og:description" content="Helper to add insets based on geom_sf() from ggplot2. This package gives you a drop-in replacement for geom_sf() that supports adding a zoomed inset map without having to create and embed a separate plot.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ggmapinset</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/ggmapinset.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cidm-ph/ggmapinset/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ggmapinset">ggmapinset<a class="anchor" aria-label="anchor" href="#ggmapinset"></a>
</h1></div>
<!-- badges: start -->

<p>Add zoomed inset panels to your ggplot maps.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install ggmapinset like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CRAN release</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'ggmapinset'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># development version</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'ggmapinset'</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://cidm-ph.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="replacing-ggplot2-sf-layers">Replacing ‘ggplot2’ sf layers<a class="anchor" aria-label="anchor" href="#replacing-ggplot2-sf-layers"></a>
</h2>
<p><a href="https://github.com/cidm-ph/ggmapinset" class="external-link">ggmapinset</a> provides drop-in replacements for each of the <a href="https://r-spatial.github.io/sf/" class="external-link">sf</a>-related layers from <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>:</p>
<table class="table">
<thead><tr class="header">
<th align="left">
<code>ggplot2</code> function</th>
<th align="left">
<code>ggmapinset</code> replacement</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf()</a></code></td>
<td align="left"><code><a href="reference/geom_sf_inset.html">geom_sf_inset()</a></code></td>
</tr>
<tr class="even">
<td align="left"><code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_text()</a></code></td>
<td align="left"><code><a href="reference/stat_sf_coordinates_inset.html">geom_sf_text_inset()</a></code></td>
</tr>
<tr class="odd">
<td align="left"><code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_label()</a></code></td>
<td align="left"><code><a href="reference/stat_sf_coordinates_inset.html">geom_sf_label_inset()</a></code></td>
</tr>
<tr class="even">
<td align="left"><code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">stat_sf()</a></code></td>
<td align="left"><code><a href="reference/geom_sf_inset.html">stat_sf_inset()</a></code></td>
</tr>
<tr class="odd">
<td align="left"><code><a href="https://ggplot2.tidyverse.org/reference/stat_sf_coordinates.html" class="external-link">stat_sf_coordinates()</a></code></td>
<td align="left"><code><a href="reference/stat_sf_coordinates_inset.html">stat_sf_coordinates_inset()</a></code></td>
</tr>
<tr class="even">
<td align="left"><code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf()</a></code></td>
<td align="left"><code><a href="reference/coord_sf_inset.html">coord_sf_inset()</a></code></td>
</tr>
</tbody>
</table>
<p>The replacements work the same as their normal versions but copy, zoom, and clip the layers to make the inset work. The stats can be used to add inset support to geoms from third-party packages. For extension developers, tools are provided to make <a href="https://r-spatial.github.io/sf/" class="external-link">sf</a>-based layers inset-aware (see <a href="https://github.com/cidm-ph/ggautomap" class="external-link">ggautomap</a> for examples).</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This example adds an inset to the first example from <code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">ggplot2::geom_sf()</a></code>. The inset area is defined as a circle centred on the named county, with radius 50 miles. The inset is enlarged by a factor of 2 and shifted to an empty part of the map.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cidm-ph/ggmapinset" class="external-link">ggmapinset</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the North Carolina map example shipped with sf</span></span>
<span><span class="va">nc</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"shape/nc.shp"</span>, package <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">inset_cfg</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/configure_inset.html">configure_inset</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/shape_circle.html">shape_circle</a></span><span class="op">(</span></span>
<span>    centre <span class="op">=</span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">nc</span><span class="op">[</span><span class="va">nc</span><span class="op">$</span><span class="va">NAME</span> <span class="op">==</span> <span class="st">"Yancey"</span>,<span class="op">]</span><span class="op">)</span>,</span>
<span>    radius <span class="op">=</span> <span class="fl">50</span></span>
<span>  <span class="op">)</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"mi"</span>,</span>
<span>  translation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="op">-</span><span class="fl">180</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_centroid assumes attributes are constant over geometries</span></span>
<span></span>
<span><span class="co"># pick some counties to label</span></span>
<span><span class="va">labelled_counties</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">nc</span><span class="op">$</span><span class="va">NAME</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">data_subset</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="va">df</span><span class="op">[</span><span class="va">df</span><span class="op">$</span><span class="va">NAME</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">labelled_counties</span>,<span class="op">]</span></span></code></pre></div>
<div style="display: flex; gap: 1em;">
<div style="flex-grow: 1">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># base ggplot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">AREA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_label</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">NAME</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">data_subset</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div style="flex-grow: 1">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># with inset added</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">nc</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/geom_sf_inset.html">geom_sf_inset</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">AREA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/geom_inset_frame.html">geom_inset_frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/stat_sf_coordinates_inset.html">geom_sf_label_inset</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">NAME</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">data_subset</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="reference/coord_sf_inset.html">coord_sf_inset</a></span><span class="op">(</span><span class="va">inset_cfg</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<p><img src="reference/figures/README-example-1.png" width="100%"></p>
<p>For more information, see the <a href="https://cidm-ph.github.io/ggmapinset/">online documentation</a> and <code><a href="articles/ggmapinset.html">vignette("ggmapinset")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>The package implements insets by duplicating and transforming spatial data within a single coordinate system. That means that you don’t get separate grid lines for the inset panel and, more significantly, the inset can be distorted by the projection of the base map if you move it too far. This tends not to be a problem in practice if you choose a coordinate system that isn’t too distorted over the area of the base map.</p>
</div>
<div class="section level2">
<h2 id="alternatives">Alternatives<a class="anchor" aria-label="anchor" href="#alternatives"></a>
</h2>
<p>Other packages implement different approaches:</p>
<ul>
<li>
<a href="https://ggforce.data-imaginist.com/reference/facet_zoom.html" class="external-link"><code>facet_zoom()</code></a> from <a href="https://cran.r-project.org/package=ggforce" class="external-link">ggforce</a>
</li>
<li>
<a href="https://hughjonesd.github.io/ggmagnify/reference/geom_magnify.html" class="external-link"><code>geom_magnify()</code></a> from <a href="https://github.com/hughjonesd/ggmagnify/" class="external-link">ggmagnify</a>
</li>
<li>
<a href="https://riatelab.github.io/mapsf/reference/mf_inset_on.html" class="external-link"><code>mf_inset_on()</code></a> from <a href="https://cran.r-project.org/package=mapsf" class="external-link">mapsf</a>
</li>
</ul>
<p>There are also several articles describing more manual ways to achieve different insets:</p>
<ul>
<li><a href="https://www.datawim.com/post/inset-map-in-r/" class="external-link uri">https://www.datawim.com/post/inset-map-in-r/</a></li>
<li><a href="https://dieghernan.github.io/202203_insetmaps/" class="external-link uri">https://dieghernan.github.io/202203_insetmaps/</a></li>
<li><a href="https://upgo.lab.mcgill.ca/2019/12/13/making-beautiful-maps/" class="external-link uri">https://upgo.lab.mcgill.ca/2019/12/13/making-beautiful-maps/</a></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=ggmapinset" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/cidm-ph/ggmapinset/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cidm-ph/ggmapinset/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ggmapinset</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Carl Suster <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7021-9380" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cidm-ph.r-universe.dev" class="external-link"><img src="https://cidm-ph.r-universe.dev/badges/ggmapinset" alt="r-universe status"></a></li>
<li><a href="https://CRAN.R-project.org/package=ggmapinset" class="external-link"><img src="https://www.r-pkg.org/badges/version/ggmapinset" alt="CRAN status"></a></li>
<li><a href="https://github.com/cidm-ph/ggmapinset/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cidm-ph/ggmapinset/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Carl Suster.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
